# Repeatable Documentation System - Setup Guide

**Created**: 2025-10-23
**Purpose**: Apply the claude-family documentation system to ANY project

---

## Overview

The documentation management system is centralized in `claude-family` but can be applied to any project. It's designed to be:

- **Simple**: 3 components (manifest + audit + git hook)
- **Automated**: Git hook prevents bloat automatically
- **Repeatable**: One command to set up new projects
- **Universal**: Works for any project with markdown docs

---

## System Components

### 1. `.docs-manifest.json` (Per Project)
- Lives in each project's root
- Tracks all markdown files
- Categories: active, deprecated, archive_candidates, docs_subdirectory
- Auto-generated by init script

### 2. Shared Scripts (In claude-family)
- `scripts/init_project_docs.py` - Initialize system for a project
- `scripts/audit_docs.py` - Audit documentation health
- `scripts/archive_docs.py` - Archive old files
- `scripts/update_manifest_lines.py` - Sync line counts
- `scripts/pre-commit-hook.sh` - Git hook template

### 3. Git Pre-Commit Hook (Per Project)
- Installed in `.git/hooks/pre-commit`
- Enforces CLAUDE.md ≤250 lines
- Blocks commits automatically if over limit

---

## Setup Process (For New Project)

### Step 1: Initialize Documentation System

```bash
cd /path/to/your/project
python C:\Projects\claude-family\scripts\init_project_docs.py .
```

This will:
- Scan all markdown files
- Create `.docs-manifest.json`
- Auto-categorize files
- Install git pre-commit hook
- Report statistics

**Output:**
```
================================================================
Documentation System Initialization
================================================================

Project: your-project
Path: C:\Projects\your-project

[>>] Scanning markdown files...
[OK] Found 25 markdown files
  - Active: 2
  - Docs: 20
  - Archive candidates: 3

[>>] Creating .docs-manifest.json...
[OK] Created: C:\Projects\your-project\.docs-manifest.json

[>>] Installing git pre-commit hook...
  [OK] Installed git pre-commit hook

================================================================
Initialization Complete!
================================================================
```

### Step 2: Review and Adjust Manifest

Open `.docs-manifest.json` and review categories:
- Move files between categories if needed
- Adjust purposes/descriptions
- Mark files for archival

### Step 3: Run First Audit

```bash
cd C:\Projects\your-project
python C:\Projects\claude-family\scripts\audit_docs.py
```

Shows:
- CLAUDE.md line count
- Files needing archival
- Manifest accuracy
- Deprecated docs >90 days

### Step 4: Archive Old Files (Optional)

```bash
# Preview what will be archived
python C:\Projects\claude-family\scripts\archive_docs.py --dry-run

# Actually archive
python C:\Projects\claude-family\scripts\archive_docs.py --month 2025-10
```

---

## Monthly Maintenance

### Run Audit (1st of each month)

```bash
cd C:\Projects\your-project
python C:\Projects\claude-family\scripts\audit_docs.py
```

### Update Line Counts

```bash
python C:\Projects\claude-family\scripts\update_manifest_lines.py
```

### Review Archive Candidates

If audit shows files ready for archival:
```bash
python C:\Projects\claude-family\scripts\archive_docs.py --month YYYY-MM
```

---

## Rules Enforced

### 1. CLAUDE.md Must Be ≤250 Lines
- **Enforced by**: Git pre-commit hook
- **Blocks commits**: Yes
- **Why**: Keep project context focused and readable

### 2. Deprecated Docs Kept 90 Days
- **Tracked in**: .docs-manifest.json
- **Action**: Archive after 90 days
- **Why**: Balance between history and bloat

### 3. Monthly Audits Required
- **Frequency**: 1st of each month
- **Action**: Run audit_docs.py
- **Why**: Prevent documentation drift

---

## Tested Projects

### claude-family (Infrastructure)
- **Status**: ✅ Fully operational
- **Files**: 33 markdown files
- **CLAUDE.md**: 95/250 lines
- **Archive candidates**: 0 (10 archived on 2025-10-23)

### nimbus-user-loader (Work)
- **Status**: ✅ Initialized 2025-10-23
- **Files**: 39 markdown files
- **CLAUDE.md**: 196/250 lines
- **Archive candidates**: 5 (large files >400 lines)

### ATO-tax-agent (Work)
- **Status**: ⏳ Not yet initialized
- **Next**: Run init_project_docs.py

### claude-pm (Infrastructure)
- **Status**: ⏳ Not yet initialized
- **Next**: Run init_project_docs.py

---

## Automation Setup (Optional)

### Windows Task Scheduler

Run `scripts/setup_scheduled_tasks.ps1` as administrator:
- **Task 1**: Claude Family Startup (at logon)
- **Task 2**: PostgreSQL Backup (weekly, Sunday 2 AM)
- **Task 3**: Documentation Audit (monthly, 1st @ 9 AM)

### Manual PostgreSQL Backup

```powershell
powershell -File C:\Projects\claude-family\scripts\backup_postgres.ps1
```

Backs up to: `C:\Users\johnd\OneDrive\Documents\Backups\PostgreSQL`

---

## Benefits of This System

### For Individual Projects
- ✅ CLAUDE.md stays focused (≤250 lines enforced)
- ✅ Documentation health visible (monthly audit)
- ✅ Old docs archived automatically
- ✅ No manual tracking needed

### As Central Solution
- ✅ **One script** to set up any project
- ✅ **Consistent** across all projects
- ✅ **Repeatable** process
- ✅ **Scales** as you add more projects
- ✅ **Centralized** scripts in claude-family
- ✅ **Per-project** manifests and hooks

---

## Future Enhancements

When ClaudePM ideas system is ready:
- Migrate manifest tracking to ClaudePM database
- Cross-project documentation search
- Automated knowledge extraction
- Centralized archival management

---

## Troubleshooting

**Problem**: `audit_docs.py` shows wrong project
**Solution**: Run from project directory: `cd C:\Projects\your-project`

**Problem**: Git hook not blocking commits
**Solution**: Reinstall hook: `python C:\Projects\claude-family\scripts\install_git_hooks.py`

**Problem**: Manifest out of sync
**Solution**: Run: `python C:\Projects\claude-family\scripts\update_manifest_lines.py`

**Problem**: Can't find `init_project_docs.py`
**Solution**: Use full path: `python C:\Projects\claude-family\scripts\init_project_docs.py .`

---

## Summary

**To apply system to a new project:**

```bash
# 1. Initialize
cd C:\Projects\your-project
python C:\Projects\claude-family\scripts\init_project_docs.py .

# 2. Review manifest
# Open .docs-manifest.json and adjust categories

# 3. Run audit
python C:\Projects\claude-family\scripts\audit_docs.py

# 4. Archive if needed
python C:\Projects\claude-family\scripts\archive_docs.py --month YYYY-MM

# Done! Git hook now enforces CLAUDE.md ≤250 lines
```

**Monthly maintenance:**
```bash
cd C:\Projects\your-project
python C:\Projects\claude-family\scripts\audit_docs.py
```

That's it! Simple, repeatable, and scales across all projects.
