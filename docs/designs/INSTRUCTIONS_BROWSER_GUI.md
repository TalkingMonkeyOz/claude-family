# Instructions Browser GUI Design

## Overview

A WinForms panel for visualizing and configuring the auto-apply instructions system.

---

## Main Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Instructions System Browser                                            [_][â–¡][X]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Instructions] [Projects] [Pattern Tester] [Dependency Graph]                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      â”‚                                                          â”‚
â”‚  INSTRUCTIONS        â”‚  DETAILS                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚  â”€â”€â”€â”€â”€â”€â”€                                                 â”‚
â”‚                      â”‚                                                          â”‚
â”‚  ğŸ“ .claude/         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚    ğŸ“ instructions/  â”‚  â”‚ winforms-dark-theme.instructions.md                 â”‚ â”‚
â”‚      ğŸ“„ a11y         â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚      ğŸ“„ csharp       â”‚  â”‚ Description: WinForms dark theme patterns           â”‚ â”‚
â”‚      ğŸ“„ nimbus-api   â”‚  â”‚ Source: Claude Family (original)                    â”‚ â”‚
â”‚    â–º ğŸ“„ winforms â”€â”€â”€â”€â”¼â”€â”€â”‚                                                     â”‚ â”‚
â”‚      ğŸ“„ winforms-... â”‚  â”‚ Applies To:                                         â”‚ â”‚
â”‚      ğŸ“„ sql-postgres â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚      ğŸ“„ playwright   â”‚  â”‚ â”‚ **/Forms/**/*.cs                                â”‚ â”‚ â”‚
â”‚                      â”‚  â”‚ â”‚ **/Controls/**/*.cs                             â”‚ â”‚ â”‚
â”‚  ğŸ“ Global           â”‚  â”‚ â”‚ **/*Form.cs                                     â”‚ â”‚ â”‚
â”‚    (C:\Projects\     â”‚  â”‚ â”‚ **/*Control.cs                                  â”‚ â”‚ â”‚
â”‚     claude-family)   â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚                      â”‚  â”‚                                                     â”‚ â”‚
â”‚                      â”‚  â”‚ Projects Using This:                                â”‚ â”‚
â”‚                      â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚                      â”‚  â”‚ â”‚ âœ“ nimbus-user-loader                            â”‚ â”‚ â”‚
â”‚                      â”‚  â”‚ â”‚ âœ“ claude-family-manager-v2                      â”‚ â”‚ â”‚
â”‚                      â”‚  â”‚ â”‚ â—‹ ATO-Tax-Agent (no WinForms)                   â”‚ â”‚ â”‚
â”‚                      â”‚  â”‚ â”‚ â—‹ nimbus-import (no WinForms)                   â”‚ â”‚ â”‚
â”‚                      â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚                      â”‚  â”‚                                                     â”‚ â”‚
â”‚                      â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚                      â”‚  â”‚ â”‚ PREVIEW                                         â”‚ â”‚ â”‚
â”‚                      â”‚  â”‚ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€                                       â”‚ â”‚ â”‚
â”‚                      â”‚  â”‚ â”‚ ## Color Palette                                â”‚ â”‚ â”‚
â”‚                      â”‚  â”‚ â”‚                                                 â”‚ â”‚ â”‚
â”‚                      â”‚  â”‚ â”‚ | Element    | Dark Mode  |                    â”‚ â”‚ â”‚
â”‚                      â”‚  â”‚ â”‚ |------------|------------|                    â”‚ â”‚ â”‚
â”‚                      â”‚  â”‚ â”‚ | Background | #1E1E1E    |                    â”‚ â”‚ â”‚
â”‚                      â”‚  â”‚ â”‚ | Surface    | #252526    |                    â”‚ â”‚ â”‚
â”‚                      â”‚  â”‚ â”‚ | Text       | #CCCCCC    |                    â”‚ â”‚ â”‚
â”‚                      â”‚  â”‚ â”‚ | Border     | #3F3F46    |                    â”‚ â”‚ â”‚
â”‚                      â”‚  â”‚ â”‚ ...                                             â”‚ â”‚ â”‚
â”‚                      â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚                      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                      â”‚                                                          â”‚
â”‚                      â”‚  [Edit] [Delete] [Test Pattern] [View Raw]               â”‚
â”‚                      â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Tab 2: Projects View

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Instructions] [Projects] [Pattern Tester] [Dependency Graph]                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      â”‚                                                          â”‚
â”‚  PROJECTS            â”‚  PROJECT: nimbus-user-loader                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€            â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                               â”‚
â”‚                      â”‚                                                          â”‚
â”‚  â— claude-family     â”‚  Path: C:\Projects\nimbus-user-loader                    â”‚
â”‚  â— ATO-Tax-Agent     â”‚  Type: WinForms (.NET 10)                                â”‚
â”‚  â— nimbus-import     â”‚  Hook Status: âœ“ Configured                               â”‚
â”‚  â–º nimbus-user-loaderâ”‚                                                          â”‚
â”‚  â— CFM-v2            â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                      â”‚  â”‚ HOOKS CONFIGURED                                    â”‚ â”‚
â”‚  Legend:             â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                   â”‚ â”‚
â”‚  â— Has hooks         â”‚  â”‚                                                     â”‚ â”‚
â”‚  â—‹ No hooks          â”‚  â”‚ PreToolUse:                                         â”‚ â”‚
â”‚  â–² Hook error        â”‚  â”‚   â”œâ”€ Edit                                           â”‚ â”‚
â”‚                      â”‚  â”‚   â”‚   â”œâ”€ instruction_matcher.py âœ“                   â”‚ â”‚
â”‚                      â”‚  â”‚   â”‚   â””â”€ validate_claude_md.py âœ“                    â”‚ â”‚
â”‚                      â”‚  â”‚   â””â”€ Write                                          â”‚ â”‚
â”‚                      â”‚  â”‚       â”œâ”€ instruction_matcher.py âœ“                   â”‚ â”‚
â”‚                      â”‚  â”‚       â””â”€ validate_claude_md.py âœ“                    â”‚ â”‚
â”‚                      â”‚  â”‚                                                     â”‚ â”‚
â”‚                      â”‚  â”‚ SessionStart:                                       â”‚ â”‚
â”‚                      â”‚  â”‚   â””â”€ session_startup_hook.py âœ“                      â”‚ â”‚
â”‚                      â”‚  â”‚                                                     â”‚ â”‚
â”‚                      â”‚  â”‚ SessionEnd:                                         â”‚ â”‚
â”‚                      â”‚  â”‚   â””â”€ prompt: "Before ending..."                     â”‚ â”‚
â”‚                      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                      â”‚                                                          â”‚
â”‚                      â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚                      â”‚  â”‚ INSTRUCTIONS THAT APPLY                             â”‚ â”‚
â”‚                      â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                            â”‚ â”‚
â”‚                      â”‚  â”‚                                                     â”‚ â”‚
â”‚                      â”‚  â”‚ For *.cs files:                                     â”‚ â”‚
â”‚                      â”‚  â”‚   âœ“ a11y (accessibility)                            â”‚ â”‚
â”‚                      â”‚  â”‚   âœ“ csharp (C# conventions)                         â”‚ â”‚
â”‚                      â”‚  â”‚   âœ“ nimbus-api (Nimbus gotchas)                     â”‚ â”‚
â”‚                      â”‚  â”‚                                                     â”‚ â”‚
â”‚                      â”‚  â”‚ For Forms/*.cs files:                               â”‚ â”‚
â”‚                      â”‚  â”‚   + winforms (WinForms rules)                       â”‚ â”‚
â”‚                      â”‚  â”‚   + winforms-dark-theme (colors)                    â”‚ â”‚
â”‚                      â”‚  â”‚                                                     â”‚ â”‚
â”‚                      â”‚  â”‚ For *.sql files:                                    â”‚ â”‚
â”‚                      â”‚  â”‚   âœ“ sql-postgres                                    â”‚ â”‚
â”‚                      â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                      â”‚                                                          â”‚
â”‚                      â”‚  [Edit hooks.json] [Sync from Template] [Test Hook]      â”‚
â”‚                      â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Tab 3: Pattern Tester

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Instructions] [Projects] [Pattern Tester] [Dependency Graph]                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚  TEST FILE PATH                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                 â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” [Browse]  â”‚
â”‚  â”‚ C:\Projects\nimbus-user-loader\Forms\MainForm.cs                â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                                                 â”‚
â”‚  [Test Now]                                                                     â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚ MATCHING RESULTS                                                            â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                            â”‚
â”‚  â”‚                                                                             â”‚
â”‚  â”‚ âœ“ 5 instructions matched                                                    â”‚
â”‚  â”‚                                                                             â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ â”‚ Instruction           â”‚ Pattern Matched        â”‚ Source                  â”‚â”‚
â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚  â”‚ â”‚ âœ“ a11y                â”‚ **/*.cs                â”‚ Global                  â”‚â”‚
â”‚  â”‚ â”‚ âœ“ csharp              â”‚ **/*.cs                â”‚ Global                  â”‚â”‚
â”‚  â”‚ â”‚ âœ“ nimbus-api          â”‚ **/nimbus-*/**/*.cs    â”‚ Global                  â”‚â”‚
â”‚  â”‚ â”‚ âœ“ winforms            â”‚ **/Forms/**/*.cs       â”‚ Global                  â”‚â”‚
â”‚  â”‚ â”‚ âœ“ winforms-dark-theme â”‚ **/*Form.cs            â”‚ Global                  â”‚â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚  â”‚                                                                             â”‚
â”‚  â”‚ INJECTED CONTEXT PREVIEW (4,521 chars)                                      â”‚
â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                       â”‚
â”‚  â”‚                                                                             â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â”‚ [AUTO-APPLIED INSTRUCTIONS]                                             â”‚ â”‚
â”‚  â”‚ â”‚ The following 5 instruction(s) apply to this file:                      â”‚ â”‚
â”‚  â”‚ â”‚                                                                         â”‚ â”‚
â”‚  â”‚ â”‚ ## A11Y                                                                 â”‚ â”‚
â”‚  â”‚ â”‚ *Accessibility and contrast requirements*                               â”‚ â”‚
â”‚  â”‚ â”‚                                                                         â”‚ â”‚
â”‚  â”‚ â”‚ # Accessibility Guidelines                                              â”‚ â”‚
â”‚  â”‚ â”‚ ## Color Contrast (WCAG 2.2 AA)                                         â”‚ â”‚
â”‚  â”‚ â”‚ | Element | Min Ratio |                                                 â”‚ â”‚
â”‚  â”‚ â”‚ |---------|-----------|                                                 â”‚ â”‚
â”‚  â”‚ â”‚ | Normal text | 4.5:1 |                                                 â”‚ â”‚
â”‚  â”‚ â”‚ ...                                                                     â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚                                                                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Tab 4: Dependency Graph

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [Instructions] [Projects] [Pattern Tester] [Dependency Graph]                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                 â”‚
â”‚  SYSTEM ARCHITECTURE                                                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                            â”‚
â”‚                                                                                 â”‚
â”‚  [Zoom: 100%] [Fit to Window] [Export PNG] [Export Mermaid]                     â”‚
â”‚                                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”‚                                                                             â”‚
â”‚  â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚  â”‚                         â”‚  Edit / Write   â”‚                                 â”‚
â”‚  â”‚                         â”‚    Tool Call    â”‚                                 â”‚
â”‚  â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚  â”‚                                  â”‚                                          â”‚
â”‚  â”‚                                  â–¼                                          â”‚
â”‚  â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚  â”‚                    â”‚   PreToolUse Hook       â”‚                              â”‚
â”‚  â”‚                    â”‚  instruction_matcher.py â”‚                              â”‚
â”‚  â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚  â”‚                                 â”‚                                           â”‚
â”‚  â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚              â”‚                  â”‚                  â”‚                        â”‚
â”‚  â”‚              â–¼                  â–¼                  â–¼                        â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚  â”‚    â”‚ Project Local   â”‚ â”‚ Global (claude- â”‚ â”‚ Pattern Match   â”‚             â”‚
â”‚  â”‚    â”‚ .claude/instr/  â”‚ â”‚ family) instrs  â”‚ â”‚ Engine          â”‚             â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚  â”‚                                 â”‚                                           â”‚
â”‚  â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚              â–¼                                     â–¼                        â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚    â”‚  *.cs patterns  â”‚                   â”‚  *.sql patterns â”‚               â”‚
â”‚  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚  â”‚             â”‚                                     â”‚                         â”‚
â”‚  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚                         â”‚
â”‚  â”‚    â–¼        â–¼        â–¼        â–¼                  â–¼                         â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚  â”‚ â”‚a11y  â”‚ â”‚csharpâ”‚ â”‚winfrmâ”‚ â”‚nimbus â”‚      â”‚sql-postgrsâ”‚                    â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚  â”‚                                                                             â”‚
â”‚  â”‚                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚  â”‚                         â”‚ additionalContextâ”‚                                â”‚
â”‚  â”‚                         â”‚   Injection      â”‚                                â”‚
â”‚  â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â”‚  â”‚                                  â”‚                                          â”‚
â”‚  â”‚                                  â–¼                                          â”‚
â”‚  â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚  â”‚                    â”‚   Claude Code Context   â”‚                              â”‚
â”‚  â”‚                    â”‚   (Before Tool Runs)    â”‚                              â”‚
â”‚  â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚  â”‚                                                                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Model

```csharp
public class InstructionFile
{
    public string Name { get; set; }           // "winforms-dark-theme"
    public string Path { get; set; }           // Full file path
    public string Description { get; set; }    // From YAML frontmatter
    public string Source { get; set; }         // "Global" or project name
    public List<string> ApplyToPatterns { get; set; }  // ["**/*.cs", "**/Forms/**"]
    public string Content { get; set; }        // Markdown body
    public bool IsGlobal { get; set; }         // From claude-family vs local
}

public class ProjectHookConfig
{
    public string ProjectName { get; set; }
    public string ProjectPath { get; set; }
    public string ProjectType { get; set; }    // "WinForms", "Blazor", "Console"
    public bool HasHooksJson { get; set; }
    public bool HasInstructionMatcher { get; set; }
    public List<HookEntry> Hooks { get; set; }
    public List<InstructionFile> ApplicableInstructions { get; set; }
}

public class HookEntry
{
    public string EventType { get; set; }      // "PreToolUse", "SessionStart"
    public string Matcher { get; set; }        // "Edit", "Write", null
    public string Type { get; set; }           // "command", "prompt"
    public string Command { get; set; }
    public bool IsValid { get; set; }          // Script exists
}
```

---

## Implementation Notes

### Services Needed

1. **InstructionService** - Load/parse instruction files
2. **HookConfigService** - Load hooks.json from projects
3. **PatternMatcherService** - Test file paths against patterns
4. **ProjectDiscoveryService** - Find projects from workspaces.json

### Key Controls

| Control | Type | Purpose |
|---------|------|---------|
| InstructionTreeView | TreeView | File browser for instructions |
| ProjectListView | ListView | List of projects |
| PatternTestPanel | Panel | Test file path input |
| DependencyGraphPanel | Custom | Mermaid-style flow diagram |
| MarkdownPreview | WebView2 | Render instruction content |

### Integration Points

- Read from: `C:\Projects\claude-family\.claude\instructions\`
- Read from: `C:\Projects\*\.claude\hooks.json`
- Read from: `C:\Projects\claude-family\workspaces.json`
- Execute: `python instruction_matcher.py` for live testing

---

## File Structure in CFM

```
claude-family-manager-v2/
â”œâ”€â”€ Forms/
â”‚   â””â”€â”€ InstructionsBrowserForm.cs      # Main form
â”œâ”€â”€ Controls/
â”‚   â”œâ”€â”€ InstructionTreeView.cs          # Left panel tree
â”‚   â”œâ”€â”€ InstructionDetailsPanel.cs      # Right panel details
â”‚   â”œâ”€â”€ PatternTesterPanel.cs           # Pattern test tab
â”‚   â””â”€â”€ DependencyGraphPanel.cs         # Graph visualization
â”œâ”€â”€ Services/
â”‚   â”œâ”€â”€ InstructionService.cs           # Parse instruction files
â”‚   â”œâ”€â”€ HookConfigService.cs            # Parse hooks.json
â”‚   â””â”€â”€ PatternMatcherService.cs        # Test patterns
â””â”€â”€ Models/
    â”œâ”€â”€ InstructionFile.cs
    â”œâ”€â”€ ProjectHookConfig.cs
    â””â”€â”€ HookEntry.cs
```

---

## Color Scheme (Dark Theme)

Following our winforms-dark-theme instruction:

| Element | Color |
|---------|-------|
| Background | #1E1E1E |
| Surface (panels) | #252526 |
| TreeView background | #1E1E1E |
| Selected item | #0078D4 |
| Text primary | #CCCCCC |
| Text secondary | #9D9D9D |
| Border | #3F3F46 |
| Success indicator | #4CAF50 |
| Error indicator | #F44336 |

---

**Version**: 1.0
**Created**: 2025-12-21
**For**: claude-family-manager-v2 (WinForms)
